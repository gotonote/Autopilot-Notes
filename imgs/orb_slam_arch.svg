<?xml version="1.0" encoding="UTF-8"?>
<svg width="550" height="400" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect x="0" y="0" width="550" height="400" fill="white"/>
  
  <!-- Title -->
  <text x="275" y="30" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">ORB-SLAM System Architecture</text>
  
  <!-- Tracking Thread -->
  <rect x="30" y="60" width="140" height="100" fill="#4CAF50" stroke="#2E7D32" stroke-width="2" rx="5"/>
  <text x="100" y="90" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Tracking</text>
  <text x="100" y="110" font-size="10" text-anchor="middle" fill="white">Feature Extraction</text>
  <text x="100" y="125" font-size="10" text-anchor="middle" fill="white">Motion Estimation</text>
  <text x="100" y="140" font-size="10" text-anchor="middle" fill="white">Frame Matching</text>
  
  <!-- Local Mapping Thread -->
  <rect x="205" y="60" width="140" height="100" fill="#2196F3" stroke="#1565C0" stroke-width="2" rx="5"/>
  <text x="275" y="90" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Local Mapping</text>
  <text x="275" y="110" font-size="10" text-anchor="middle" fill="white">KeyFrame Insertion</text>
  <text x="275" y="125" font-size="10" text-anchor="middle" fill="white">Local BA</text>
  <text x="275" y="140" font-size="10" text-anchor="middle" fill="white">Map Point Culling</text>
  
  <!-- Loop Closing Thread -->
  <rect x="380" y="60" width="140" height="100" fill="#FF9800" stroke="#EF6C00" stroke-width="2" rx="5"/>
  <text x="450" y="90" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Loop Closing</text>
  <text x="450" y="110" font-size="10" text-anchor="middle" fill="white">Loop Detection</text>
  <text x="450" y="125" font-size="10" text-anchor="middle" fill="white">Compute Similarity</text>
  <text x="450" y="140" font-size="10" text-anchor="middle" fill="white">Pose Graph Opt</text>
  
  <!-- Arrows between threads -->
  <line x1="170" y1="110" x2="205" y2="110" stroke="#333" stroke-width="2"/>
  <line x1="345" y1="110" x2="380" y2="110" stroke="#333" stroke-width="2"/>
  
  <!-- Map Database -->
  <rect x="175" y="200" width="200" height="80" fill="#9C27B0" stroke="#6A1B9A" stroke-width="2" rx="5"/>
  <text x="275" y="230" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Map Database</text>
  <text x="275" y="250" font-size="10" text-anchor="middle" fill="white">KeyFrames + Map Points</text>
  <text x="275" y="265" font-size="10" text-anchor="middle" fill="white">BoW Vocabulary</text>
  
  <!-- Input -->
  <rect x="30" y="320" width="150" height="50" fill="#E0E0E0" stroke="#9E9E9E" stroke-width="2" rx="5"/>
  <text x="105" y="345" font-size="12" text-anchor="middle" fill="#333">Input: RGB-D/Stereo</text>
  
  <!-- Output -->
  <rect x="370" y="320" width="150" height="50" fill="#E0E0E0" stroke="#9E9E9E" stroke-width="2" rx="5"/>
  <text x="445" y="345" font-size="12" text-anchor="middle" fill="#333">Output: Camera Pose</text>
  
  <!-- Connecting lines -->
  <line x1="100" y1="160" x2="100" y2="200" stroke="#666" stroke-width="1" stroke-dasharray="4"/>
  <line x1="275" y1="160" x2="275" y2="200" stroke="#666" stroke-width="1" stroke-dasharray="4"/>
  <line x1="450" y1="160" x2="450" y2="200" stroke="#666" stroke-width="1" stroke-dasharray="4"/>
  <line x1="100" y1="280" x2="100" y2="320" stroke="#333" stroke-width="1"/>
  <line x1="450" y1="280" x2="450" y2="320" stroke="#333" stroke-width="1"/>
</svg>
